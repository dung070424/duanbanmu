<div class="promotion-form-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-left">
      <div class="page-title">
        <i class="bi bi-gift"></i>
        <h1>Thêm Đợt Giảm Giá</h1>
      </div>
    </div>
  </div>

  <!-- Error Message -->
  <div *ngIf="error" class="alert alert-danger">
    <i class="bi bi-exclamation-triangle"></i>
    {{ error }}
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Left Section: Promotion Information -->
    <div class="left-section">
      <div class="section-header">
        <i class="bi bi-info-circle"></i>
        <h3>① Thông Tin Đợt Giảm Giá</h3>
      </div>
      
      <div class="form-content">
        <div class="form-group">
          <label for="maDotGiamGia">Mã đợt giảm giá</label>
          <input
            type="text"
            id="maDotGiamGia"
            class="form-control"
            [(ngModel)]="promotionData.maDotGiamGia"
            placeholder="Mã tự động"
            readonly
          />
        </div>

        <div class="form-group">
          <label for="tenDotGiamGia">Tên đợt giảm giá</label>
          <input
            type="text"
            id="tenDotGiamGia"
            class="form-control"
            [(ngModel)]="promotionData.tenDotGiamGia"
            placeholder="Nhập tên đợt giảm giá"
            [disabled]="loading"
          />
        </div>

        <div class="form-group">
          <label for="loaiDotGiamGia">Loại giảm giá</label>
          <select
            id="loaiDotGiamGia"
            class="form-control"
            [(ngModel)]="promotionData.loaiDotGiamGia"
            [disabled]="loading"
          >
            <option value="PHAN_TRAM">Phần trăm (%)</option>
            <option value="SO_TIEN">Số tiền (VND)</option>
          </select>
        </div>

        <div class="form-group" *ngIf="promotionData.loaiDotGiamGia === 'PHAN_TRAM'">
          <label for="giaTriDotGiam">Giá trị giảm giá (%)</label>
          <input
            type="number"
            id="giaTriDotGiam"
            class="form-control"
            [(ngModel)]="promotionData.giaTriDotGiam"
            placeholder="0"
            min="0"
            max="100"
            [disabled]="loading"
          />
        </div>

        <div class="form-group" *ngIf="promotionData.loaiDotGiamGia === 'SO_TIEN'">
          <label for="soTien">Số tiền giảm (VND)</label>
          <input
            type="number"
            id="soTien"
            class="form-control"
            [(ngModel)]="promotionData.soTien"
            placeholder="Nhập số tiền giảm"
            min="0"
            [disabled]="loading"
          />
        </div>

        <div class="form-group">
          <label for="ngayBatDau">Ngày bắt đầu</label>
          <div class="date-input-group">
            <input
              type="date"
              id="ngayBatDau"
              class="form-control"
              [(ngModel)]="promotionData.ngayBatDau"
              [disabled]="loading"
            />
            <i class="bi bi-calendar"></i>
          </div>
        </div>

        <div class="form-group">
          <label for="ngayKetThuc">Ngày kết thúc</label>
          <div class="date-input-group">
            <input
              type="date"
              id="ngayKetThuc"
              class="form-control"
              [(ngModel)]="promotionData.ngayKetThuc"
              [disabled]="loading"
            />
            <i class="bi bi-calendar"></i>
          </div>
        </div>

        <div class="form-group">
          <label for="moTa">Mô tả</label>
          <textarea
            id="moTa"
            class="form-control"
            [(ngModel)]="promotionData.moTa"
            placeholder="Nhập mô tả đợt giảm giá"
            rows="3"
            [disabled]="loading"
          ></textarea>
        </div>

        <!-- Action Buttons -->
        <div class="form-actions">
          <button class="btn btn-secondary" (click)="onBack()" [disabled]="loading">
            <i class="bi bi-arrow-left"></i>
            Quay Về
          </button>
          <button class="btn btn-primary" (click)="onSubmit()" [disabled]="loading">
            <i class="bi bi-plus"></i>
            Thêm
          </button>
        </div>
      </div>
    </div>

    <!-- Right Section: Product List -->
    <div class="right-section">
      <div class="section-header">
        <i class="bi bi-list"></i>
        <h3>Danh Sách Sản Phẩm</h3>
      </div>

      <!-- Search and Filter Controls -->
      <div class="search-controls">
        <div class="search-group">
          <i class="bi bi-search"></i>
          <input
            type="text"
            class="form-control"
            placeholder="Tìm kiếm theo tên, mã..."
            [(ngModel)]="searchTerm"
            (keyup)="onSearch()"
            [disabled]="loading"
          />
        </div>

        <div class="filter-group">
          <label>Hệ điều hành</label>
          <select class="form-control" [(ngModel)]="selectedManufacturer" (change)="onManufacturerChange()" [disabled]="loading">
            <option value="">Tất cả</option>
            <option *ngFor="let manufacturer of manufacturers" [value]="manufacturer">
              {{ manufacturer }}
            </option>
          </select>
        </div>
      </div>

      <!-- Product Table -->
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th>
                <input
                  type="checkbox"
                  (change)="onSelectAll()"
                  [checked]="isAllSelected()"
                />
              </th>
              <th>STT</th>
              <th>Mã</th>
              <th>Tên SP</th>
              <th>Hãng</th>
              <th>Số lượng</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let product of filteredProducts; let i = index">
              <td>
                <input
                  type="checkbox"
                  [checked]="product.selected"
                  (change)="onProductSelect(product)"
                />
              </td>
              <td>{{ i + 1 }}</td>
              <td>{{ product.maSanPham }}</td>
              <td>{{ product.tenSanPham }}</td>
              <td>{{ product.tenNhaSanXuat }}</td>
              <td>{{ product.soLuongTon }}</td>
            </tr>
            <tr *ngIf="filteredProducts.length === 0 && !loading">
              <td colspan="6" class="text-center">
                <i class="bi bi-inbox"></i>
                Không có sản phẩm nào
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Pagination -->
      <div class="pagination-info">
        <div class="pagination-left">
          <span>Hiển thị {{ filteredProducts.length }} mục/trang</span>
        </div>
        <div class="pagination-right">
          <span>Hiển thị 1-{{ filteredProducts.length }} / {{ products.length }} mục</span>
        </div>
      </div>
    </div>
  </div>

 
</div>
