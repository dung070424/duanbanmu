<div class="modal-overlay" *ngIf="isVisible" (click)="onBackdropClick($event)">
  <div class="modal-container">
    <div class="modal-header">
      <h3>
        <i class="bi bi-gift"></i>
        {{ isEditMode ? 'Chỉnh sửa khuyến mãi' : 'Thêm khuyến mãi mới' }}
      </h3>
      <button class="close-btn" (click)="onClose()">
        <i class="bi bi-x"></i>
      </button>
    </div>

    <div class="modal-body">
      <form (ngSubmit)="onSave()">
        <div class="form-row">
          <div class="form-group">
            <label for="code">Mã khuyến mãi *</label>
            <input
              type="text"
              id="code"
              class="form-control"
              [(ngModel)]="formData.code"
              name="code"
              placeholder="VD: KM001"
              required
            />
          </div>
          <div class="form-group">
            <label for="name">Tên chương trình *</label>
            <input
              type="text"
              id="name"
              class="form-control"
              [(ngModel)]="formData.name"
              name="name"
              placeholder="VD: Giảm giá mùa hè"
              required
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="discountType">Loại giảm giá</label>
            <select
              id="discountType"
              class="form-control"
              [(ngModel)]="formData.discountType"
              name="discountType"
            >
              <option *ngFor="let type of discountTypes" [value]="type.value">
                {{ type.label }}
              </option>
            </select>
          </div>
          <div class="form-group">
            <label for="discountValue">Giá trị giảm *</label>
            <input
              type="text"
              id="discountValue"
              class="form-control"
              [(ngModel)]="formData.discountValue"
              name="discountValue"
              placeholder="VD: 15% hoặc 100.000₫"
              required
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="startDate">Ngày bắt đầu</label>
            <input
              type="date"
              id="startDate"
              class="form-control"
              [(ngModel)]="formData.startDate"
              name="startDate"
            />
          </div>
          <div class="form-group">
            <label for="endDate">Ngày kết thúc</label>
            <input
              type="date"
              id="endDate"
              class="form-control"
              [(ngModel)]="formData.endDate"
              name="endDate"
            />
          </div>
        </div>

        <div class="form-group">
          <label for="condition">Điều kiện áp dụng</label>
          <textarea
            id="condition"
            class="form-control"
            [(ngModel)]="formData.condition"
            name="condition"
            rows="3"
            placeholder="VD: Đơn hàng từ 500.000₫"
          ></textarea>
        </div>

        <div class="form-group">
          <label for="status">Trạng thái</label>
          <select id="status" class="form-control" [(ngModel)]="formData.status" name="status">
            <option *ngFor="let status of statusOptions" [value]="status.value">
              {{ status.label }}
            </option>
          </select>
        </div>
      </form>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" (click)="onClose()">Hủy</button>
      <button type="button" class="btn btn-primary" (click)="onSave()">
        <i class="bi bi-check"></i>
        {{ isEditMode ? 'Cập nhật' : 'Thêm mới' }}
      </button>
    </div>
  </div>
</div>
